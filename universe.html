<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>X-UNIVERSE // MEMORIES (FULL)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --neon:#00f7ff; --danger:#f9627d; --bg:#05080d; --panel:rgba(0,10,25,0.95); --muted:#9bd9d0;
    }
    body{background:var(--bg);color:var(--neon);font-family:'Orbitron',sans-serif;}
    .terminal{max-width:1100px;margin:36px auto;background:var(--panel);padding:26px;border-radius:12px;border:1px solid #00f7ff22;box-shadow:0 0 40px #00f7ff11;}
    .title{font-family:'Press Start 2P';text-align:center;margin-bottom:18px;text-shadow:0 0 10px var(--neon);font-size:1.05rem;}
    .menu{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-bottom:14px;}
    .menu-btn{background:#000;border:1px solid #00f7ff33;padding:8px 12px;color:var(--neon);font-size:.78rem;text-transform:uppercase;cursor:pointer;}
    .menu-btn.active,.menu-btn:hover{background:#00f7ff11;box-shadow:0 0 10px #00f7ff22;}
    .section{display:none;animation:fade .22s ease;}
    .section.active{display:block;}
    @keyframes fade{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}
    .log{background:#02060c;padding:16px;border-left:3px solid var(--neon);line-height:1.6;font-size:.95rem;white-space:pre-wrap;}
    .codex{margin-top:12px;padding:12px;background:#020610;border:1px solid #00f7ff22;font-size:.88rem;color:var(--muted);}
    .back{display:block;margin-top:18px;color:var(--neon);text-decoration:none;text-align:center;opacity:0.85;}
    .terminal-box{margin-top:16px;background:#000;padding:12px;font-family:monospace;border:1px solid #00f7ff22;}
    #terminal-output{max-height:320px;overflow:auto;font-size:.9rem;color:var(--neon);padding:6px;}
    #terminal-input{width:100%;background:#000;color:var(--neon);border:none;outline:none;padding:8px;font-family:monospace;}
    .file-list{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;}
    .file-pill{background:#000;border:1px solid #00f7ff33;padding:6px 10px;font-size:.82rem;color:var(--neon);cursor:pointer;border-radius:6px;}
    .file-pill:hover{background:#00f7ff11;box-shadow:0 0 8px #00f7ff11;}
    .small{font-size:.82rem;color:var(--muted);}
    .cursor::after{content:" ▌";animation:blink 1s steps(1) infinite;}
    @keyframes blink{50%{opacity:0}}
    pre { white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body>

  <div class="container">
    <div class="terminal">
      <h1 class="title">X-UNIVERSE // MEMORIES & CODEX (FULL)</h1>

      <div class="menu">
        <div class="menu-btn active" data-target="intro">Intro</div>
        <div class="menu-btn" data-target="lore">Lore</div>
        <div class="menu-btn" data-target="memories">Memories</div>
        <div class="menu-btn" data-target="archives">Archives</div>
        <div class="menu-btn" data-target="help">Help</div>
      </div>

      <div id="intro" class="section active">
        <div class="log cursor">
Sujet : COBAYE_001
Statut : En observation
Localisation : BaseX

Tapez "help" ou "memories help" pour démarrer.
        </div>
      </div>

      <div id="lore" class="section">
        <div class="log">
Résumé :
- BaseX → RushX → RogueX → BuildX / BaseTacticX
- Le joueur commence sur BaseX en tant que cobaye.
- S'il devient trop fort / dangereux, il est transféré sur RushX.
- S'il domine RushX, il peut être proposé pour RogueX.
- S'il gagne la confiance des créateurs, il accède à BuildX ou BaseTacticX et cesse d'être un cobaye.
        </div>

        <div class="codex small">
Contenu extrait et enrichi depuis ton Trello (BaseX). Source JSON fournie. :contentReference[oaicite:1]{index=1}
        </div>
      </div>

      <div id="memories" class="section">
        <div class="log">
Mode MEMORIES : interrogez la base.

Commandes utiles (exemples) :
- memories list
- memories --project=basex
- archive list
- archive basex.ui
- lore basex
- lore rushx
- lore tests
- lore forts
- lore selection
        </div>

        <div class="codex small">
Les archives exposent les cartes Trello (UI, systems, idées, sous-projets) comme "documents internes".
        </div>
      </div>

      <div id="archives" class="section">
        <div class="log">
Archives disponibles pour BaseX.
Cliquez une entrée ou utilisez la commande <code>archive &lt;key&gt;</code>.
        </div>

        <div class="file-list" id="file-pills"></div>
        <div id="file-content" class="codex small" style="display:none; white-space:pre-wrap;"></div>
      </div>

      <div id="help" class="section">
        <div class="log">
Commandes principales :
- help / aide
- status
- lore [-basex|-rushx|-roguex|-buildx|-tests|-forts|-selection|-timeline]
- memories list | memories --project=basex
- archive list | archive &lt;key&gt;
- archive search &lt;mot&gt;
- clear
        </div>
      </div>

      <div class="terminal-box">
        <div id="terminal-output">Terminal ready. Tapez "help".</div>
        <input id="terminal-input" type="text" placeholder="> commande..." autocomplete="off" />
      </div>

      <a class="back" href="../index.html">← Retour au portfolio</a>
    </div>
  </div>

  <script>
    /* ---------------------------
       ARCHIVES (contenu completisé et enrichi)
       Les textes ci-dessous combinent :
       - le JSON Trello que tu m'as envoyé (basex.json). :contentReference[oaicite:2]{index=2}
       - le long texte de lore que tu as collé (RushX, tests ratés, forts, sélection, etc.)
       --------------------------- */

    const archives = {
      "basex.ui": `UI - Home screen / Principes
- Premier écran : "Tap to play" + vérif DL ressources.
- Home screen principal :
  - Gauche : événements / annonces
  - Droite : actions principales (Jouer / Options)
  - Top-right : clear cache
  - Bottom-left : icônes social
- Si connecté -> sélection de serveur (tri par pays).
- Paramètres :
  - Sauvegarder position/taille UI
  - Option masquer éléments
- Philosophie :
  - Easy-to-understand, hard-to-master
  - Moins de clics possibles
  - Feedback visuel clair (chargement, inventaire plein)
Notes : exporté depuis la carte "Faut l'écrire tant que j'y pense". :contentReference[oaicite:3]{index=3}`,

      "basex.systems": `Systems - Ressources & Gameplay
- Récolte :
  - Rapide : 1 clic, collecte stable.
  - Précis : mini-jeu court, meilleur yield / objets rares.
- Récolte roches/minerais : mini-jeux + RNG pondéré.
- Progression : "Cycling" -> mécaniques s'ouvrent avec le temps.
- Persistence : conserver préférences joueur (layout, options).
- Idée blueprint :
  - Drop fragments dans le monde -> assembler pour débloquer blueprints (notes Trello).
Source : cartes "Systems" & "Système de blueprint". :contentReference[oaicite:4]{index=4}`,

      "basex.rushx": `RushX — DEPOTOIR SCIENTIFIQUE (DESCRIPTION COMPLETE)
- RushX est une île-dépotoir où sont larguées les expériences jugées :
  - inutiles
  - instables
  - dangereuses
- Méthode d'arrivée : capsules de largage (atterrissage brutal; os souvent brisés).
- Paysage : ruines de laboratoires, faune mutée, vestiges technologiques.

Origine des tests ratés :
- Essais biologiques :
  - Tentatives de fusion humain/animal ou humain/matériaux organiques synthétiques.
  - Résultat : mutations inadaptées (membres inutilisables, instincts incontrôlables).
- Sujets de conditionnement mental :
  - Psychés brisées par manipulation ; ultra-agressifs ou semi-hypnotiques.
- Déchets technologiques :
  - Implants cybernétiques instables ; chair rejetant la technologie ou corps transformé en amas métallique non fonctionnel.

Ambiance & objectifs :
- Terrain d'expérimentation chaotique, non maitrisé.
- Observations sauvages pour comprendre limites d'adaptation.
- Les scientifiques observent, analysent, attendent (but global inconnu).
(Contenu enrichi depuis ton paste et Trello.)`,

      "basex.forts": `RushX — LES FORTS (CLASSES)
- Les forts ne sont pas seulement puissants physiquement : ce sont ceux qui comprennent les règles de cet enfer.

1) Combattants primitifs
- Rejettent la technologie.
- Corps adaptés : force & résistance accrues.
- Capacités : vision nocturne, perception du mouvement, sens du danger.
- Combat : instinctif, brutal, efficace.
- Société : tribus éphémères, alliances de circonstance.
- Règle : le faible meurt ; le fort survit.

2) Mutants technologiques
- Embrassent la technologie (implants volontaires ou récupération).
- Caractéristiques :
  - Cybernétique improvisée (membres mécaniques, implants neuronaux).
  - Puissance énergétique (sources instables intégrées = surcharges possibles).
  - Comportement : stratégie, adaptation, souvent solitaires.
- Groupes : petits gangs basés sur nécessité, forte paranoïa autour du vol d'améliorations.`,

      "basex.tests": `TESTS RATÉS — ORIGINES & DETAILS
- Essais biologiques :
  - But : forcer de nouvelles capacités (hybridation, mutations).
  - Risque : mutations non adaptatives (membres inutiles, comportements suicidaires).
- Conditionnements mentaux :
  - Procédures de manipulation psychique ; certains sujets deviennent hyper-violents ou catatoniques.
- Déchets technologiques :
  - Implants mal calibrés ; rejet tissulaire ; métaux envahissants.
- Constat terrain :
  - Les tests ratés forment une population hétérogène, souvent dangereuse et imprévisible.
- Arrivée : largage via capsules ; blessures fréquentes ; besoin immédiat d'adaptation ou mort rapide.`,

      "basex.selection": `SELECTION — ACCES À ROGUEX (MÉCANIQUE & RITUEL)
- Qui sont les élus ?
  - Pas forcément les plus forts physiquement.
  - Souvent : survie exceptionnelle, mutation rare, maîtrise technologique.
  - Parfois : sélection aléatoire pour tester un nouveau protocole expérimental.

- Comment sont-ils choisis ?
  - Observation par drones et capteurs invisibles.
  - Donne l'illusion d'une sélection "mystique", mais c'est du monitoring scientifique.

- Le rituel du passage :
  - Les candidats affrontent une épreuve finale entre eux.
  - La victoire n'assure pas la sélection.
  - Extraction : capsules ou portails lumineux, souvent inconscients.
  - Aucune certitude sur le "après".

- Conséquences sociales :
  - Certains craignent la sélection plus que la mort.
  - D'autres la recherchent (espérant vérité/ascension).`,

      "basex.judgex": `JUDGE X (Sous-projet)
- Concept : décisions type "Reigns".
- Mécanique : prendre des décisions publiques, équilibrer ressources & moralité.
- Usage : tester conséquences sociales et morales des choix sur population de cobayes.
(Extrait carte "JudgeX" dans Trello). :contentReference[oaicite:5]{index=5}`,

      "basex.cards": `CARDS & RAW THOUGHTS (EXTRAITS)
- "Faut l'ecrire tant que j'y pense" : home screen + UX notes.
- "Système de blueprint" : récupérer fragments dans le monde pour assembler blueprints.
- "Système de recherche de base" : instanced zones (courtes sessions, arrow to next base).
- IDLE GAME : idées pour déclinaison idle.
- Nom de domaine / SEO : basex.org / basex.com (penser au référencement).
(Contenu partiellement extrait du Trello importé). :contentReference[oaicite:6]{index=6}`,

      "basex.index": `Index des archives BaseX:
- basex.ui
- basex.systems
- basex.rushx
- basex.forts
- basex.tests
- basex.selection
- basex.judgex
- basex.cards`
    };

    /* ---------------------------
       UI interactions
       --------------------------- */

    // menu switch
    document.querySelectorAll('.menu-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.target;
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(target).classList.add('active');
      });
    });

    // populate pills
    const filePills = document.getElementById('file-pills');
    Object.keys(archives).forEach(key => {
      const pill = document.createElement('div');
      pill.className = 'file-pill';
      pill.textContent = key;
      pill.addEventListener('click', () => showArchive(key));
      filePills.appendChild(pill);
    });

    function showArchive(key){
      const container = document.getElementById('file-content');
      container.style.display = 'block';
      container.textContent = `--- ${key} ---\n\n` + (archives[key] || 'Archive introuvable.');
      // mirror into terminal output for demo
      appendLine(`archive ${key}`);
      appendLine(archives[key]);
    }

    /* ---------------------------
       Terminal
       - normalization: accepts spaces OR hyphens
       - archive search implemented
       --------------------------- */

    const out = document.getElementById('terminal-output');
    const input = document.getElementById('terminal-input');

    function appendLine(text){
      out.innerHTML += '<br>' + text;
      out.scrollTop = out.scrollHeight;
    }

    function normalize(cmd){
      return cmd.toLowerCase().replace(/\s+/g,' ').replace(/-/g,' ').trim();
    }

    // commands map (short ones call archives or larger lore)
    const commands = {
      'help': () => `
Commandes disponibles :
- help
- status
- lore (lore basex | lore rushx | lore roguex | lore buildx | lore tests | lore forts | lore selection | lore timeline)
- memories list
- memories --project=basex
- archive list
- archive <key>
- archive search <mot>
- clear
`.trim(),

      'status': () => "Statut : Sujet conscient. Surveillance active.",

      'lore': () => `Résumé : BaseX -> RushX -> RogueX -> BuildX/BaseTacticX
Tapez "lore basex" ou "lore rushx" pour voir le texte détaillé.`,

      // detailed lore entries (very verbose, include dashes for clarity)
      'lore basex': () => {
        return [
          "BASEX — (DESCRIPTION DÉTAILLÉE)",
          "- BaseX n'est pas un archipel ordinaire : c'est un laboratoire à ciel ouvert.",
          "- Le joueur : cobaye enlevé, surveillé depuis sa mise en sommeil.",
          "- Expériences menées :",
          "  - Manipulation du climat (tempêtes, catastrophes contrôlées).",
          "  - Implantation d'outils de surveillance (implants cybernétiques).",
          "  - Protocoles d'évolution : forcer l'adaptation humaine.",
          "- Objectif des scientifiques (résumé) : mesurer limites d'adaptation, préparer subjects pour étapes ultérieures.",
          "- Notes UI/Design liées (voir archives basex.ui & basex.systems)."
        ].join("\n");
      },

      'lore rushx': () => archives["basex.rushx"] + "\n\n- Voir aussi : basex.tests (origines des tests ratés) ; basex.forts (classes des forts).",

      'lore roguex': () => {
        return [
          "ROGUEX — (SELECTION FINALE)",
          "- RogueX est perçu comme une 'ascension' ou une condamnation.",
          "- Candidats extraits : survie exceptionnelle, mutations rares, maîtrise d'anciennes techs, ou tirage expérimental.",
          "- Méthodes : observation par drones, épreuve finale, extraction par capsules/portails.",
          "- Conséquence : aucun retour documenté. Destination inconnue."
        ].join("\n");
      },

      'lore buildx': () => {
        return [
          "BUILDX / BASETACTICX",
          "- Étape finale : le sujet n'est plus un cobaye.",
          "- Rôles possibles :",
          "  - BuildX : création, architecture, contrôle d'éléments du projet.",
          "  - BaseTacticX : commandement, tactiques, opérations.",
          "- Conséquence : accès aux structures internes, coopération possible avec les créateurs."
        ].join("\n");
      },

      'lore tests': () => archives["basex.tests"],

      'lore forts': () => archives["basex.forts"],

      'lore selection': () => archives["basex.selection"],

      'lore timeline': () => `Timeline simplifiée :\n- BaseX → RushX → RogueX → BuildX/BaseTacticX\n- À chaque étape : moins d'humanité, plus d'utilité pour le projet.`,

      'memories list': () => "Projets disponibles : BaseX",
      'memories --project=basex': () => "Memory Core Loaded: BaseX\nTapez 'archive list' pour voir les archives disponibles.",

      'archive list': () => Object.keys(archives).join('\n'),

      'clear': () => ""
    };

    // archive search helper
    function searchArchives(term){
      const keys = Object.keys(archives);
      const found = keys.filter(k => archives[k].toLowerCase().indexOf(term.toLowerCase()) !== -1);
      return found.length ? found.join('\n') : 'Aucun résultat.';
    }

    input.addEventListener('keydown', e => {
      if (e.key !== 'Enter') return;
      let raw = input.value.trim();
      if (!raw) return;
      appendLine('> ' + raw);
      input.value = '';

      // normalize to accept hyphens and multiple spaces
      const cmdNorm = normalize(raw);

      // archive search
      if (cmdNorm.startsWith('archive search ')){
        const term = raw.slice(raw.indexOf(' ')+1).replace(/^search\s+/i,'').trim();
        appendLine('Recherche archives pour: ' + term);
        appendLine(searchArchives(term));
        return;
      }

      // direct archive <key>
      if (cmdNorm.startsWith('archive ')){
        const key = raw.slice(raw.indexOf(' ')+1).trim();
        // allow key with hyphen/space answers
        const keyNormalized = key.replace(/-/g,'.').replace(/\s+/g,'.').toLowerCase();
        // try exact match, then try common forms:
        const exact = archives[key];
        const alt1 = archives[key.toLowerCase()];
        const alt2 = archives[key.replace(/\s+/g,'.').toLowerCase()];
        const alt3 = archives[key.replace(/\s+/g,'').toLowerCase()];
        if (exact) {
          appendLine('--- ' + key + ' ---');
          appendLine(exact);
          // show in file view too
          document.getElementById('file-content').style.display='block';
          document.getElementById('file-content').textContent = `--- ${key} ---\n\n${exact}`;
          return;
        } else if (alt1) {
          appendLine('--- ' + key.toLowerCase() + ' ---');
          appendLine(alt1);
          document.getElementById('file-content').style.display='block';
          document.getElementById('file-content').textContent = `--- ${key.toLowerCase()} ---\n\n${alt1}`;
          return;
        } else if (archives[key.toLowerCase()]) {
          appendLine('--- ' + key.toLowerCase() + ' ---');
          appendLine(archives[key.toLowerCase()]);
          document.getElementById('file-content').style.display='block';
          document.getElementById('file-content').textContent = `--- ${key.toLowerCase()} ---\n\n${archives[key.toLowerCase()]}`;
          return;
        } else {
          appendLine('Archive introuvable. Tapez "archive list" pour voir les clés.');
          return;
        }
      }

      // memories commands
      if (cmdNorm.startsWith('memories')) {
        if (cmdNorm === 'memories list') {
          appendLine(commands['memories list']());
          return;
        }
        if (cmdNorm === 'memories --project=basex' || cmdNorm === 'memories --project basex') {
          appendLine(commands['memories --project=basex']());
          return;
        }
        appendLine('Usage: memories list | memories --project=basex');
        return;
      }

      // lore commands: accept 'lore basex' or 'lore-basex' etc by normalizing
      if (cmdNorm.startsWith('lore')) {
        const arg = cmdNorm.replace('lore','').trim(); // e.g., 'basex'
        const key = arg ? 'lore ' + arg : 'lore';
        if (commands[key]) {
          appendLine(commands[key]());
          return;
        } else {
          appendLine('Usage: lore | lore basex | lore rushx | lore roguex | lore buildx | lore tests | lore forts | lore selection');
          return;
        }
      }

      // normal commands
      if (commands[cmdNorm]) {
        if (cmdNorm === 'clear') {
          out.innerHTML = 'Terminal vidé.';
        } else {
          appendLine(commands[cmdNorm]());
        }
        return;
      }

      appendLine('Commande inconnue. Tapez "help".');
    });

    // focus
    document.addEventListener('click', () => document.getElementById('terminal-input').focus());
    document.getElementById('terminal-input').focus();
  </script>
</body>
</html>
